<div i18n:domain="novaideo"
     tal:condition="object.subjects"
     tal:define="icon object.icon;
                 alert_kind getattr(object, 'alert_kind', '');
                 new_alert object.is_to_alert(current_user)">
  <div tal:define="subject object.subjects[0]" class="alert-item ${new_alert and 'new-alert'}">
    <h4><span class="icon ${icon}"></span> <span tal:replace="layout.to_localized_time(object.modified_at)"/></h4>
    
    <span tal:condition="alert_kind == 'start_work'">
      Le groupe de travail a voté pour la poursuite de l'amélioration de la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.
    </span>
    <span tal:condition="alert_kind == 'submit_proposal'">
      Le groupe de travail a voté pour soumettre la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> en l'état aux membres de la plateforme.
    </span>

    <span tal:condition="alert_kind == 'end_work'">
        Le cycle d'amélioration de la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> est terminé, vous devez voter si vous voulez continuer à l'améliorer ou la soumettre en l'état aux membres de la plateforme.
    </span>

    <span tal:condition="alert_kind == 'voting_amendment'">
        Le cycle d'amélioration de la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> est terminé, vous devez voter sur les amendements soumis.
    </span>

    <span tal:condition="alert_kind == 'alert_end_work'">
      Le cycle d'amélioration pour la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> touche pratiquement à sa fin. Vous pouvez encore y apporter des améliorations, avant que le groupe de travail vote pour soumettre la proposition en l'état ou pour recommencer un nouveau cycle d'amélioration.
    </span>

    <span tal:condition="alert_kind == 'new_amendments'">Des amendments pour la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> viennent d'être ajoutés.</span>
    
    <span tal:condition="alert_kind == 'no_amendment'">Le cycle d'amélioration associé à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a fini sans proposition d'amendements.</span>
    
    <span tal:condition="alert_kind == 'amendments_result'">Le résultat sur les votes sur les amendements associés à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été calculé.</span>
    
    <span tal:condition="alert_kind == 'correction_added'">La proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a fait l'objet de suggestions d'amélioration et est à relire.</span>

    <span tal:condition="alert_kind == 'participate'">Une personne a rejoint le groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

    <span tal:condition="alert_kind == 'wg_wating_list_participation'">Une personne, faisant partie de la liste d'attente, a rejoint le groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

    <span tal:condition="alert_kind == 'resign'">Une personne a quitté le groupe de travail lié à la proposition<a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

    <span tal:condition="alert_kind == 'resign_to_wg_open'">Le groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> est en dessous du nombre minimum des participants et ne peut plus améliorer la proposition tant qu'il n'a pas atteint de nouveau le nombre minimum des participants.</span>

    <span tal:condition="alert_kind == 'amendable'">Le groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a atteint le nombre minimum des participants et peut améliorer la proposition.</span>

    <span tal:condition="alert_kind == 'add_files'">Des fichiers ont été ajoutés dans l'espace de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>
    
    <span tal:condition="alert_kind == 'wg_participation_max'">
        Le groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a atteint le nombre maximal des participants et ne peut plus accueillir de nouveaux participants, sauf s'il y en a un qui démissionne.
    </span>
    <span tal:condition="alert_kind == 'participations_maxi'">
        Vous participez actuellement à ${request.root.participations_maxi} groupes de travail, vous ne pouvez plus rejoindre d'autres groupes de travail.
    </span>
    <span tal:condition="alert_kind == 'correction_validated'">
        Les suggestions d'amélioration sur la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> ont été entièrement acceptées ou refusées, vous pouvez suggérer de nouvelles améliorations.
    </span>

    <span tal:condition="alert_kind == 'exclude'">
      Le groupe de travail a exclu un participant du groupe de travail lié à la proposition<a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

    <span tal:condition="alert_kind == 'exclude_to_wg_open'">
      Suite à une exclusion d'un participant, le groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> est maintenant en dessous du nombre minimum des participants et ne peut plus améliorer la proposition tant qu'il n'a pas atteint de nouveau le nombre minimum des participants.</span>

    <span tal:condition="alert_kind == 'exclude_participant'">
      Une demande d'exclusion d'un membre du groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été formulée. Vous êtes invité à voter pour ou contre l'exclusion.</span>

    <span tal:condition="alert_kind == 'new_participant'">
      Une demande de participation d'un membre au groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été formulée. Vous êtes invité à voter pour ou contre la participation.</span>

      <span tal:condition="alert_kind == 'cancel_participation'">
        Votre demande de participation au groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été annulée. Vous avez atteint la limite de nombre de participations aux groupes de travail qui est de ${getattr(request.virtual_root, 'participations_maxi', 5)} participations maximum.</span>

      <span tal:condition="alert_kind == 'cancel_participation_members'">
        La demande de participation de <a href="${object.participant_url}"><span class="${object.participant_icon}"></span> ${object.participant_title}</a> au groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été annulée. Le membre a atteint la limite de nombre de participations aux groupes de travail qui est de ${getattr(request.virtual_root, 'participations_maxi', 5)} participations maximum.
      </span>

      <span tal:condition="alert_kind == 'refuse_participant'">
        Votre demande de participation au groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été refusée par les membres du groupe.</span>

      <span tal:condition="alert_kind == 'refuse_participant_members'">
         La demande de participation de <a href="${object.participant_url}"><span class="${object.participant_icon}"></span> ${object.participant_title}</a> au groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été refusée par les membres du groupe.</span>

      <span tal:condition="alert_kind == 'refuse_exclusion'">
        La demande d'exclusion de votre participation du groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été refusée par les membres du groupe.</span>

      <span tal:condition="alert_kind == 'refuse_exclusion_members'">
         La demande d'exclusion de <a href="${object.participant_url}"><span class="${object.participant_icon}"></span> ${object.participant_title}</a> du groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a> a été refusée par les membres du groupe.</span>

      <span tal:condition="alert_kind == 'member_notation'">
         Vous êtes invité à juger le membre <a href="${object.user_url}"><span class="${object.user_icon}"></span> ${object.user_title}</a> sur la qualité de son comportement coopératif dans le cadre du groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

      <span tal:condition="alert_kind == 'members_notation'">
         Vous êtes invité à juger les membres sur la qualité de leur comportement coopératif dans le cadre du groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>
      <span tal:condition="alert_kind == 'member_notation_excluded'">
         Vous êtes invité à juger les membres sur la qualité de leur comportement coopératif dans le cadre du groupe de travail lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

      <span tal:condition="alert_kind == 'wg_exclude'">
        Le groupe de travail a décidé de vous exclure du groupe lié à la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>

      <span tal:condition="alert_kind == 'wg_resign'">
         Vous ne faites plus partie du groupe de travail de la proposition <a href="${request.resource_url(subject, '@@index')}"><span class="${getattr(subject, 'icon')}"></span> ${subject.title}</a>.</span>
  </div>
</div>
